# Moca Project

MocaëŠ” ì°¨ëŸ‰ ë Œíƒˆ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ì¢…í•© ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‚¬ìš©ìë“¤ì´ í¸ë¦¬í•˜ê²Œ ì°¨ëŸ‰ì„ ì˜ˆì•½í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í†µí•© í”Œë«í¼ì„ ì œê³µí•˜ë©°, AI ì±—ë´‡ì„ í†µí•œ ê³ ê° ì§€ì›ê¹Œì§€ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ğŸ‘¤ ì‚¬ìš©ì ê¸°ëŠ¥
- **ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸** - ê°„í¸í•œ ì†Œì…œ ë¡œê·¸ì¸
- **ì°¨ëŸ‰ ì˜ˆì•½ ì‹œìŠ¤í…œ** - ì§ê´€ì ì¸ ì˜ˆì•½ ì¸í„°í˜ì´ìŠ¤
- **ë³´í—˜ ì„ íƒ** - ë² ì´ì§/ìŠ¤íƒ ë‹¤ë“œ/í”„ë¦¬ë¯¸ì—„ ë³´í—˜ ì˜µì…˜
- **ê²°ì œ ì‹œìŠ¤í…œ** - ì¹´ì¹´ì˜¤í˜ì´ í†µí•© ê²°ì œ
- **ë§ˆì´í˜ì´ì§€** - ì˜ˆì•½ í˜„í™© ì¡°íšŒ ë° ê´€ë¦¬, ì˜ˆì•½ ì·¨ì†Œ
- **ë©´í—ˆì¦ ì¸ì¦** - OCR ê¸°ë°˜ ìë™ ì¸ì¦
- **AI ì±—ë´‡** - ì‹¤ì‹œê°„ ê³ ê° ì§€ì› ë° ë¬¸ì˜ ì‘ë‹µ
- **ê³µì§€ì‚¬í•­ ë° FAQ** - ìµœì‹  ì •ë³´ í™•ì¸

### ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì ê¸°ëŠ¥
- **ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ** - í†µí•© ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤
- **ì°¨ëŸ‰ ê´€ë¦¬** - ë“±ë¡, ìˆ˜ì •, ì‚­ì œ
- **ì˜ˆì•½ í˜„í™© ëª¨ë‹ˆí„°ë§** - ì‹¤ì‹œê°„ ì˜ˆì•½ ìƒíƒœ í™•ì¸
- **ë©´í—ˆì¦ ìŠ¹ì¸ ê´€ë¦¬** - ì‚¬ìš©ì ë©´í—ˆì¦ ê²€í†  ë° ìŠ¹ì¸
- **ê³µì§€ì‚¬í•­ ê´€ë¦¬** - ì¹´í…Œê³ ë¦¬ë³„ ê³µì§€ì‚¬í•­ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ
- **ì±—ë´‡ í•™ìŠµ ë°ì´í„° ê´€ë¦¬** - AI ì‘ë‹µ í’ˆì§ˆ í–¥ìƒ

### ğŸ¤– AI ì±—ë´‡ ê¸°ëŠ¥
- **ìì—°ì–´ ì²˜ë¦¬** - Google Gemini API ê¸°ë°˜ ëŒ€í™”
- **ì˜ë„ ë¶„ë¥˜** - ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì‚¬ìš©ì ì˜ë„ íŒŒì•…
- **ì„¸ì…˜ ê´€ë¦¬** - ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- **ì‹¤ì‹œê°„ ì‘ë‹µ** - ì¦‰ì‹œ ê³ ê° ë¬¸ì˜ ì²˜ë¦¬
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§** - ì‘ë‹µ í’ˆì§ˆ ë° ì •í™•ë„ ì¶”ì 

### ğŸ“‹ OCR ê¸°ëŠ¥
- **ìš´ì „ë©´í—ˆì¦ ì¸ì‹** - ë©´í—ˆ ì •ë³´ ìë™ ì¸ì‹
- **ì‹ ìš©ì¹´ë“œ ì¸ì‹** - ê²°ì œ ì •ë³´ ì…ë ¥ ì§€ì›

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend (Spring Boot)
- **Framework**: Spring Boot 2.7+
- **Language**: Java 17
- **Database**: Oracle Database
- **Authentication**: JWT, Kakao OAuth 2.0
- **OCR**: EasyCodef API

### AI Chatbot Backend (Flask)
- **Framework**: Flask
- **Language**: Python 3.13
- **AI**: Google Gemini API (Vertex AI)
- **ML**: Scikit-learn, TensorFlow
- **Features**: AutoML, Intent Classification, Session Management

### Frontend
- **Framework**: React 18
- **Build Tool**: Vite
- **Styling**: Styled Components
- **State Management**: Redux Toolkit
- **Icons**: React Icons, Phosphor Icons
- **HTTP Client**: Axios

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
moca/
â”œâ”€â”€ back/                           # Spring Boot ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/main/java/com/moca/app/
â”‚   â”‚   â”œâ”€â”€ config/                 # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ controller/             # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ service/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ login/                  # ì¸ì¦ ê´€ë ¨
â”‚   â”‚   â””â”€â”€ ocr/                    # OCR ê´€ë ¨
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ db/                     # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â””â”€â”€ js/                     # JavaScript ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ src/test/                   # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ chatbot-back/                   # Flask AI ì±—ë´‡ ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ app.py                      # Flask ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ requirements.txt            # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ models/                     # ML ëª¨ë¸ ì €ì¥ì†Œ
â”‚   â””â”€â”€ templates/                  # HTML í…œí”Œë¦¿
â”œâ”€â”€ front/                          # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/             # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ notices/            # ê³µì§€ì‚¬í•­ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ reservation/        # ì˜ˆì•½ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ chatbot/            # ì±—ë´‡ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ pages/                  # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ contexts/               # React Context
â”‚   â”‚   â””â”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ public/                     # ì •ì  íŒŒì¼
â””â”€â”€ README.md
```

## âš™ï¸ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Java 17 ì´ìƒ
- Node.js 16 ì´ìƒ
- Python 3.13
- Oracle Database
- Git

### 1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone <repository-url>
cd moca
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
Oracle ë°ì´í„°ë² ì´ìŠ¤ì— ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤:
```bash
# ë Œíƒˆ ì‹œìŠ¤í…œ í…Œì´ë¸” ìƒì„±
@back/src/main/resources/db/rental.sql

# ê³µì§€ì‚¬í•­ í…Œì´ë¸” ìƒì„±
@back/src/main/resources/db/notices.sql
```

### 3. Spring Boot ë°±ì—”ë“œ ì„¤ì •
```bash
cd back

# application.properties íŒŒì¼ ì„¤ì •
cp src/main/resources/application.properties.example src/main/resources/application.properties
```

`application.properties` íŒŒì¼ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ìˆ˜ì •í•˜ì„¸ìš”:
```properties
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
spring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe
spring.datasource.username=your_username
spring.datasource.password=your_password

# ì¹´ì¹´ì˜¤ OAuth ì„¤ì •
kakao.client.id=your_kakao_client_id
kakao.client.secret=your_kakao_client_secret

# JWT ì„¤ì •
jwt.secret=your_jwt_secret_key
```

### 4. EasyCodef OCR API ì„¤ì •
`back/src/main/java/com/moca/app/ocr/api/EasyCodefClientInfo.java` íŒŒì¼ì—ì„œ API ì •ë³´ë¥¼ ì„¤ì •í•˜ì„¸ìš”:
```java
public static final String CLIENT_ID = "your_codef_client_id";
public static final String CLIENT_SECRET = "your_codef_client_secret";
public static final String PUBLIC_KEY = "your_codef_public_key";
```

### 5. Flask ì±—ë´‡ ë°±ì—”ë“œ ì„¤ì •
```bash
cd chatbot-back

# Python ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# Google Cloud ì¸ì¦ ì„¤ì •
# application_default_credentials.json íŒŒì¼ì„ chatbot-back/ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜
```

### 6. ë°±ì—”ë“œ ì‹¤í–‰

**Spring Boot ì„œë²„ ì‹¤í–‰ (í¬íŠ¸ 8080)**
```bash
cd back
./gradlew bootRun
```

**Flask ì±—ë´‡ ì„œë²„ ì‹¤í–‰ (í¬íŠ¸ 5000)**
```bash
cd chatbot-back
python app.py
```

### 7. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
ìƒˆ í„°ë¯¸ë„ì—ì„œ:
```bash
cd front

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (í¬íŠ¸ 3000)
npm run dev
```

## ğŸŒ API ì—”ë“œí¬ì¸íŠ¸

### Spring Boot API (í¬íŠ¸ 8080)

#### ì¸ì¦
- `POST /api/auth/kakao` - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
- `POST /api/auth/refresh` - í† í° ê°±ì‹ 

#### ì‚¬ìš©ì ê´€ë¦¬
- `GET /api/users/profile` - ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
- `PUT /api/users/profile` - ì‚¬ìš©ì í”„ë¡œí•„ ìˆ˜ì •

#### ì°¨ëŸ‰ ê´€ë¦¬
- `GET /api/cars` - ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ
- `GET /api/cars/{id}` - íŠ¹ì • ì°¨ëŸ‰ ì¡°íšŒ
- `POST /api/cars` - ì°¨ëŸ‰ ë“±ë¡ (ê´€ë¦¬ì)
- `PUT /api/cars/{id}` - ì°¨ëŸ‰ ìˆ˜ì • (ê´€ë¦¬ì)
- `DELETE /api/cars/{id}` - ì°¨ëŸ‰ ì‚­ì œ (ê´€ë¦¬ì)

#### ì˜ˆì•½ ê´€ë¦¬
- `GET /api/reservations` - ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ
- `GET /api/reservations/my-reservations` - ë‚´ ì˜ˆì•½ í˜„í™© ì¡°íšŒ
- `POST /api/reservations` - ì˜ˆì•½ ìƒì„±
- `PUT /api/reservations/{id}` - ì˜ˆì•½ ìˆ˜ì •
- `PUT /api/reservations/{id}/cancel` - ì˜ˆì•½ ì·¨ì†Œ
- `DELETE /api/reservations/{id}` - ì˜ˆì•½ ì‚­ì œ

#### ë©´í—ˆì¦ ê´€ë¦¬
- `POST /api/licenses` - ë©´í—ˆì¦ ë“±ë¡
- `GET /api/licenses/{id}` - ë©´í—ˆì¦ ì¡°íšŒ
- `PUT /api/licenses/{id}/approve` - ë©´í—ˆì¦ ìŠ¹ì¸ (ê´€ë¦¬ì)

#### OCR
- `POST /api/ocr/process` - OCR ì²˜ë¦¬

#### ê³µì§€ì‚¬í•­
- `GET /api/notices` - ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ
- `GET /api/notices/{id}` - íŠ¹ì • ê³µì§€ì‚¬í•­ ì¡°íšŒ
- `POST /api/notices` - ê³µì§€ì‚¬í•­ ìƒì„± (ê´€ë¦¬ì)
- `PUT /api/notices/{id}` - ê³µì§€ì‚¬í•­ ìˆ˜ì • (ê´€ë¦¬ì)
- `DELETE /api/notices/{id}` - ê³µì§€ì‚¬í•­ ì‚­ì œ (ê´€ë¦¬ì)

#### FAQ
- `GET /api/faqs` - FAQ ëª©ë¡ ì¡°íšŒ
- `GET /api/faqs/{id}` - íŠ¹ì • FAQ ì¡°íšŒ

### Flask ì±—ë´‡ API (í¬íŠ¸ 5000)

#### ì±—ë´‡ ì„œë¹„ìŠ¤
- `GET /` - ì±—ë´‡ ì„œë²„ ìƒíƒœ í™•ì¸
- `GET /test` - í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
- `POST /get_response` - ì±—ë´‡ ì‘ë‹µ ìš”ì²­
- `POST /feedback` - ì±—ë´‡ ì‘ë‹µ í”¼ë“œë°±
- `GET /session/{session_id}` - íŠ¹ì • ì„¸ì…˜ ì¡°íšŒ
- `GET /sessions` - ëª¨ë“  ì„¸ì…˜ ì¡°íšŒ

#### ì±—ë´‡ ìš”ì²­ ì˜ˆì‹œ
```json
{
  "message": "ì°¨ëŸ‰ ì˜ˆì•½í•˜ê³  ì‹¶ì–´ìš”",
  "session_id": "optional_session_id"
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### Spring Boot ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
```bash
cd back
./gradlew test
```

### React í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
```bash
cd front
npm test
```

### Flask ì±—ë´‡ í…ŒìŠ¤íŠ¸
```bash
cd chatbot-back
python -m pytest tests/  # í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ìˆëŠ” ê²½ìš°
```

## ğŸš€ ë°°í¬

### Spring Boot ë°±ì—”ë“œ ë¹Œë“œ
```bash
cd back
./gradlew build

# JAR íŒŒì¼ ì‹¤í–‰
java -jar build/libs/app-0.0.1-SNAPSHOT.jar
```

### React í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
```bash
cd front
npm run build

# ë¹Œë“œëœ íŒŒì¼ì´ dist/ ë””ë ‰í† ë¦¬ì— ìƒì„±ë©ë‹ˆë‹¤
```

### Flask ì±—ë´‡ í”„ë¡œë•ì…˜ ì‹¤í–‰
```bash
cd chatbot-back

# Gunicornì„ ì‚¬ìš©í•œ í”„ë¡œë•ì…˜ ì‹¤í–‰
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜

### Spring Boot ë°±ì—”ë“œ
- `DB_URL` - ë°ì´í„°ë² ì´ìŠ¤ URL
- `DB_USERNAME` - ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ìëª…
- `DB_PASSWORD` - ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸
- `KAKAO_CLIENT_ID` - ì¹´ì¹´ì˜¤ í´ë¼ì´ì–¸íŠ¸ ID
- `KAKAO_CLIENT_SECRET` - ì¹´ì¹´ì˜¤ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿
- `JWT_SECRET` - JWT ë¹„ë°€í‚¤
- `CODEF_CLIENT_ID` - EasyCodef í´ë¼ì´ì–¸íŠ¸ ID
- `CODEF_CLIENT_SECRET` - EasyCodef í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿

### Flask ì±—ë´‡ ë°±ì—”ë“œ
- `GOOGLE_APPLICATION_CREDENTIALS` - Google Cloud ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ ê²½ë¡œ
- `PROJECT_ID` - Google Cloud í”„ë¡œì íŠ¸ ID
- `LOCATION` - Vertex AI ì§€ì—­ ì„¤ì •

### React í”„ë¡ íŠ¸ì—”ë“œ
- `VITE_API_BASE_URL` - API ì„œë²„ ê¸°ë³¸ URL
- `VITE_CHATBOT_API_URL` - ì±—ë´‡ API ì„œë²„ URL
- `VITE_KAKAO_APP_KEY` - ì¹´ì¹´ì˜¤ ì•± í‚¤

## ğŸ†• ìµœì‹  ì—…ë°ì´íŠ¸ (v2.0)
- AI ì±—ë´‡ ì‹œìŠ¤í…œ - Google Gemini ê¸°ë°˜ ì‹¤ì‹œê°„ ê³ ê° ì§€ì›
### ìƒˆë¡œìš´ ê¸°ëŠ¥
- **AI ì±—ë´‡ ì‹œìŠ¤í…œ** - Google Gemini ê¸°
