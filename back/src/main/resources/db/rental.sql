-- 렌탈 시스템 테이블 생성 및 더미데이터 삽입 (기존 USERS, LOCATION 테이블 활용)

-- 1. 차량 타입 테이블
DROP TABLE VEHICLE_TYPE;
CREATE TABLE VEHICLE_TYPE (
                              CODE VARCHAR2(20) PRIMARY KEY,
                              NAME VARCHAR2(50) NOT NULL
);

-- 2. 차량 테이블
DROP TABLE CAR;
CREATE TABLE CAR (
                     ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                     VEHICLE_TYPE_CODE VARCHAR2(20) NOT NULL,
                     CAR_NUMBER VARCHAR2(50) NOT NULL,
                     STATUS VARCHAR2(20) NOT NULL,
                     IMAGE_URL VARCHAR2(255),
                     CONSTRAINT FK_CAR_VEHICLE_TYPE FOREIGN KEY (VEHICLE_TYPE_CODE) REFERENCES VEHICLE_TYPE(CODE)
);

-- 3. 면허증 테이블 (기존 USERS 테이블의 USER_ID 참조)
-- DROP TABLE LICENSE;
-- CREATE TABLE LICENSE (
--                          ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
--                          USER_ID VARCHAR2(50) NOT NULL,
--                          LICENSE_NUMBER VARCHAR2(50) NOT NULL,
--                          LICENSE_EXPIRY DATE NOT NULL,
--                          LICENSE_IMAGE_URL VARCHAR2(255),
--                          APPROVED NUMBER(1) DEFAULT 0 NOT NULL,
--                          CONSTRAINT FK_LICENSE_USER FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
-- ); Drop 완료

-- 4. 예약 테이블 (기존 USERS, LOCATION 테이블 참조)
DROP TABLE RESERVATION;
CREATE TABLE RESERVATION (
                             ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                             USER_ID VARCHAR2(50) NOT NULL,
                             CAR_ID NUMBER NOT NULL,
                             LOCATION_NAME VARCHAR2(100) NOT NULL,
                             RENTAL_DATE DATE NOT NULL,
                             RENTAL_TIME TIMESTAMP NOT NULL,
                             RETURN_DATE DATE,
                             RETURN_TIME TIMESTAMP,
                             PASSENGER_COUNT NUMBER,
                             MEMO CLOB,
                             STATUS VARCHAR2(20) NOT NULL,
                             TOTAL_AMOUNT NUMBER,
                             CONSTRAINT FK_RESERVATION_USER FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
                             CONSTRAINT FK_RESERVATION_CAR FOREIGN KEY (CAR_ID) REFERENCES CAR(ID),
                             CONSTRAINT FK_RESERVATION_LOCATION FOREIGN KEY (LOCATION_NAME) REFERENCES LOCATION(LOCATION_NAME)
);

-- ======================= 더미데이터 삽입 =======================

-- 1. 기존 USERS 테이블에 렌탈 사용자 데이터 추가 (기존 데이터가 없다면)
-- 관리자 계정
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('admin', 'admin123', '관리자', 'ADMIN');

-- 일반 사용자들
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('kim_cs', 'user123', '김철수', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('lee_yh', 'user123', '이영희', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('park_ms', 'user123', '박민수', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('choi_je', 'user123', '최지은', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('jung_th', 'user123', '정태호', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('kang_sj', 'user123', '강수진', 'USER');
INSERT INTO USERS (USER_ID, USER_PASSWORD, USER_NAME, USER_ROLE) VALUES
    ('yoon_mr', 'user123', '윤미래', 'USER');

-- 2. 차량 타입 더미데이터
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('COMPACT', '소형차');
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('MIDSIZE', '중형차');
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('FULLSIZE', '대형차');
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('SUV', 'SUV');
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('VAN', '승합차');
INSERT INTO VEHICLE_TYPE (CODE, NAME) VALUES ('EV', '전기차');

-- 3. 차량 더미데이터
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('COMPACT', '12가1234', 'AVAILABLE', 'https://example.com/car1.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('COMPACT', '34나5678', 'RENTED', 'https://example.com/car2.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('MIDSIZE', '56다9012', 'AVAILABLE', 'https://example.com/car3.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('MIDSIZE', '78라3456', 'AVAILABLE', 'https://example.com/car4.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('FULLSIZE', '90마7890', 'MAINTENANCE', 'https://example.com/car5.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('SUV', '12바1234', 'AVAILABLE', 'https://example.com/car6.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('SUV', '34사5678', 'RENTED', 'https://example.com/car7.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('VAN', '56아9012', 'AVAILABLE', 'https://example.com/car8.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('COMPACT', '78자3456', 'AVAILABLE', 'https://example.com/car9.jpg');
INSERT INTO CAR (VEHICLE_TYPE_CODE, CAR_NUMBER, STATUS, IMAGE_URL) VALUES
    ('MIDSIZE', '90차7890', 'RENTED', 'https://example.com/car10.jpg');

-- 4. 면허증 더미데이터 (기존 USERS의 USER_ID 참조)
-- INSERT INTO LICENSE (USER_ID, LICENSE_NUMBER, LICENSE_EXPIRY, LICENSE_IMAGE_URL, APPROVED) VALUES
--     ('kim_cs', '11-12-123456-78', DATE '2026-12-31', 'https://example.com/license1.jpg', 1);
-- INSERT INTO LICENSE (USER_ID, LICENSE_NUMBER, LICENSE_EXPIRY, LICENSE_IMAGE_URL, APPROVED) VALUES
--     ('lee_yh', '22-23-234567-89', DATE '2025-08-15', 'https://example.com/license2.jpg', 1);
-- INSERT INTO LICENSE (USER_ID, LICENSE_NUMBER, LICENSE_EXPIRY, LICENSE_IMAGE_URL, APPROVED) VALUES
--     ('park_ms', '33-34-345678-90', DATE '2027-03-20', 'https://example.com/license3.jpg', 0);
-- INSERT INTO LICENSE (USER_ID, LICENSE_NUMBER, LICENSE_EXPIRY, LICENSE_IMAGE_URL, APPROVED) VALUES
--     ('choi_je', '44-45-456789-01', DATE '2025-11-10', 'https://example.com/license4.jpg', 1);
-- INSERT INTO LICENSE (USER_ID, LICENSE_NUMBER, LICENSE_EXPIRY, LICENSE_IMAGE_URL, APPROVED) VALUES
--     ('jung_th', '55-56-567890-12', DATE '2026-06-05', 'https://example.com/license5.jpg', 0);

-- 5. 예약 더미데이터 (기존 LOCATION 테이블의 호텔을 렌탈 지점으로 활용)
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('kim_cs', 1, '포시즌스 호텔 서울', DATE '2025-01-15', TIMESTAMP '2025-01-15 09:00:00', DATE '2025-01-17', TIMESTAMP '2025-01-17 18:00:00', 2, '가족 여행용', 'CONFIRMED', 150000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('lee_yh', 2, '신라호텔', DATE '2025-01-20', TIMESTAMP '2025-01-20 10:00:00', DATE '2025-01-22', TIMESTAMP '2025-01-22 17:00:00', 1, '출장용', 'IN_PROGRESS', 120000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('park_ms', 3, '포시즌스 호텔 서울', DATE '2025-02-01', TIMESTAMP '2025-02-01 08:00:00', DATE '2025-02-03', TIMESTAMP '2025-02-03 19:00:00', 4, '주말 나들이', 'PENDING', 200000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('choi_je', 6, '롯데호텔 서울', DATE '2025-01-25', TIMESTAMP '2025-01-25 11:00:00', DATE '2025-01-27', TIMESTAMP '2025-01-27 16:00:00', 3, '서울 여행', 'CONFIRMED', 180000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('jung_th', 7, '안다즈 서울 강남', DATE '2024-12-20', TIMESTAMP '2024-12-20 14:00:00', DATE '2024-12-22', TIMESTAMP '2024-12-22 12:00:00', 2, '연말 모임', 'COMPLETED', 160000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('kang_sj', 8, '그랜드 하얏트 서울', DATE '2025-02-10', TIMESTAMP '2025-02-10 13:00:00', DATE '2025-02-12', TIMESTAMP '2025-02-12 15:00:00', 8, '단체 여행용 승합차', 'PENDING', 250000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('yoon_mr', 9, 'JW 메리어트 호텔 서울', DATE '2025-01-30', TIMESTAMP '2025-01-30 09:30:00', DATE '2025-02-01', TIMESTAMP '2025-02-01 18:30:00', 1, '개인 용무', 'CONFIRMED', 140000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('kim_cs', 4, '콘래드 서울', DATE '2024-11-15', TIMESTAMP '2024-11-15 15:00:00', DATE '2024-11-17', TIMESTAMP '2024-11-17 10:00:00', 2, '결혼기념일', 'COMPLETED', 170000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('lee_yh', 10, '워커힐 호텔앤리조트', DATE '2025-03-05', TIMESTAMP '2025-03-05 12:00:00', DATE '2025-03-07', TIMESTAMP '2025-03-07 14:00:00', 3, '봄 나들이', 'PENDING', 190000);
INSERT INTO RESERVATION (USER_ID, CAR_ID, LOCATION_NAME, RENTAL_DATE, RENTAL_TIME, RETURN_DATE, RETURN_TIME, PASSENGER_COUNT, MEMO, STATUS, TOTAL_AMOUNT) VALUES
    ('park_ms', 1, '시그니엘 서울', DATE '2024-12-01', TIMESTAMP '2024-12-01 10:00:00', DATE '2024-12-03', TIMESTAMP '2024-12-03 18:00:00', 2, '연말 쇼핑', 'COMPLETED', 130000);

-- 6. 기존 LOCATION 테이블에 렌탈 지점 용도로 사용할 수 있도록 추가 데이터 (필요시)
-- 기존 호텔 데이터가 있으므로 그대로 렌탈 지점으로 활용

COMMIT;